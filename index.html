<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Selector</title>
</head>
<body>
    <h1>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É</h1>
    <button onclick="selectGame('cube')">–ö—É–±–∏–∫ üé≤</button>
    <button onclick="selectGame('basketball')">–ë–∞—Å–∫–µ—Ç–±–æ–ª üèÄ</button>
    <button onclick="selectGame('darts')">–î–∞—Ä—Ç—Å üéØ</button>
    <button onclick="selectGame('football')">–§—É—Ç–±–æ–ª ‚öΩ</button>
    <button onclick="selectGame('rps')">–ö–∞–º–µ–Ω—å, –Ω–æ–∂–Ω–∏—Ü—ã, –±—É–º–∞–≥–∞ ‚úÇÔ∏è</button>
    <button onclick="selectGame('slots')">–°–ª–æ—Ç—ã üé∞</button>
    <button onclick="selectGame('bowling')">–ë–æ—É–ª–∏–Ω–≥ üé≥</button>
    <!-- –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ –∏–≥—Ä—ã –∑–¥–µ—Å—å -->

    <script>
        function selectGame(game) {
            const userId = Telegram.WebApp.initDataUnsafe.user.id;
            const userFullName = Telegram.WebApp.initDataUnsafe.user.first_name + ' ' + Telegram.WebApp.initDataUnsafe.user.last_name;

            console.log(`–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∏–≥—Ä—ã: ${game}`);
            fetch("http://localhost:8000/webhook", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    game: game,
                    user_id: userId,
                    user_full_name: userFullName
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log(`–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: ${JSON.stringify(data)}`);
                Telegram.WebApp.close();  // –ó–∞–∫—Ä—ã—Ç—å WebApp –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä—ã
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞:', error);
            });
        }

        window.Telegram.WebApp.onEvent('main_button_pressed', function() {
            Telegram.WebApp.showPopup('–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –∏–≥—Ä—É!');
        });
    </script>
</body>
</html>
